<--help {motion} = {motion} = Original work by Dr. Baklava • github.com/cd4u2b0z • 2026 -->

[English](README.md) | **Русский**

# 󰝚 Braille-Boogie v3.2

**Терминальный аудиовизуализатор с танцующим персонажем из Unicode Braille-символов, реагирующим на музыку в реальном времени.**

> 󰀨 **Ранняя разработка** — Проект находится в начальной стадии и может содержать ошибки. Приветствуются вклады, отчёты об ошибках и отзывы!

**Последнее:** 228 базовых поз 󰸞 Жанровые танцевальные стили 󰝚 Лунная походка, балет, брейк-данс и многое другое

![Linux](https://img.shields.io/badge/Linux-FCC624?style=flat&logo=linux&logoColor=black)
![macOS](https://img.shields.io/badge/macOS-000000?style=flat&logo=apple&logoColor=white)
![C](https://img.shields.io/badge/C-A8B9CC?style=flat&logo=c&logoColor=black)
![PipeWire](https://img.shields.io/badge/PipeWire-4A86CF?style=flat&logo=linux&logoColor=white)
![Лицензия](https://img.shields.io/badge/Лицензия-MIT-green?style=flat)
![Версия](https://img.shields.io/badge/Версия-3.2.0-blue?style=flat)

![Демо](assets/demo.gif)

> *«Ритм говорит. Терминал танцует. Физика делает остальное.»*

---

## 󰐕 Возможности

### 󰎈 Аудио-реактивная анимация
- **Анализ частот в реальном времени** через FFTW3
- **228 базовых поз** в 13 категориях (~1,190 с процедурными вариациями)
- **Анимация на основе физики** с пружинно-демпферной системой суставов

### 󰓾 Частотно-зависимое движение
| Диапазон | Частоты | Реакция тела |
|----------|---------|--------------|
| 󰋄 **Бас** | 20-300 Гц | Ноги, бёдра, притопы |
| 󰝚 **Средние** | 300-2 кГц | Торс, покачивание головой |
| 󰋅 **Высокие** | 2 кГц+ | Руки, кисти, завитушки |

### 󱐋 Визуальные эффекты
| Эффект | Клавиша | Описание |
|--------|---------|----------|
| 󰸞 **Частицы** | `p` | Искры из-под ног на басовых ударах |
| 󰘵 **Следы** | `m` | Призрачные послеобразы следуют за конечностями |
| 󰌪 **Дыхание** | `b` | Тонкая анимация в покое |

### 󰝚 Определение жанра и пасхалки (v3.2)
Автоматическое определение жанра адаптирует стиль танцора и активирует особые движения:

| Жанр | Определение | Особые движения |
|------|-------------|-----------------|
| 󰓃 **Электроника/EDM** | Много высоких, быстрый BPM | Роботизированные позы (локи, изоляции) |
| 󰎈 **Хип-Хоп** | Сильный бас, средний темп | Лунная походка, брейк-фризы |
| 󰋄 **Рок** | Высокая энергия, гитарный диапазон | Хедбэнгинг, мощные стойки |
| 󰎇 **Классика** | Низкая энергия, сбалансированность | Балетные позиции, вальсовые рамки |
| 󰝚 **Поп** | Сбалансированная энергия, ровный бит | Лунная походка, плавные переходы |
| 󰺠 **Эмбиент** | Очень низкая энергия | Мягкое покачивание |

Пасхальные движения срабатывают случайно (~15% шанс) при определении жанра.

### 󰔶 Умная система анимации
- **Определение битов** с оценкой BPM
- **Антиповторение** — история поз (избегает последних 8 поз)
- **Плавная интерполяция** через функции сглаживания
- **Инерция** и физика следования

### 󰝚 Танцевальные стили v3.2
| Стиль | Позы | Описание |
|-------|------|----------|
| 󰛿 **Лунная походка** | 4 | Плавные скольжения назад, стойки на носках |
| 󰴓 **Балет** | 5 | Первая позиция, арабеск, плие, релеве |
| 󰨊 **Брейк-данс** | 4 | Топроки, фризы, подготовка к пауэр-мувам |
| 󰝚 **Вальс** | 4 | Рамки, повороты, подъёмы, покачивания |
| 󰚩 **Робот** | 5 | Локи, экстеншены, изоляции |
| 󰋄 **Хедбэнг** | 4 | Удары вниз, «рога», мощная стойка |

### 󰓾 Аудиоанализ
| Функция | Описание |
|---------|----------|
| 󰾆 **BPM-трекер** | Мульти-тап усреднение темпа с уверенностью и стабильностью |
| 󰄧 **Анализатор энергии** | RMS-энергия, зоны интенсивности, спектральные характеристики |
| 󰸞 **Фоновые эффекты** | 7 эффектов частиц (эмбиент, волны, аура, взрыв, ленты, дождь, вихрь) |

### 󱐋 Фоновые эффекты v3.0
| Эффект | Описание |
|--------|----------|
| 󰖨 **Эмбиент-поле** | Плавающие мерцающие частицы |
| 󰘸 **Спектральные волны** | Частотно-реактивные импульсы |
| 󰝁 **Энергетическая аура** | Пульсирующее кольцо вокруг танцора |
| 󰛲 **Ударный взрыв** | Взрывы, синхронизированные с битами |
| 󰄧 **Частотные ленты** | Вертикальные частотные полосы |
| 󰖐 **Дождь частиц** | Падающие частицы сверху |
| 󰜁 **Спиральный вихрь** | Вращающиеся спиральные рукава |

---

## 󰏖 Зависимости

```bash
# Arch Linux
sudo pacman -S fftw libpulse ncurses pipewire pkg-config

# Ubuntu/Debian
sudo apt install libfftw3-dev libpulse-dev libncurses-dev libpipewire-0.3-dev pkg-config

# Fedora
sudo dnf install fftw-devel pulseaudio-libs-devel ncurses-devel pipewire-devel pkg-config

# macOS (Homebrew)
brew install fftw ncurses pkg-config
```

---

## 󰏗 Сборка

```bash
# Клонирование репозитория
git clone https://github.com/cd4u2b0z/braille-boogie.git
cd braille-boogie

# Сборка брейль-скелетного танцора (рекомендуется)
make braille

# Или сборка кадрового танцора
make
```

### 󱁤 Цели Make

```bash
make help      # Показать все доступные цели
make info      # Показать информацию о сборке (версия, хеш, дата)
make run       # Собрать и запустить брейль-танцора
make debug     # Сборка с отладочными символами (-g -O0)
make clean     # Удалить артефакты сборки
```

### 󰍉 Качество кода

```bash
# Статический анализ (требуется cppcheck)
cppcheck --enable=all --suppress=missingIncludeSystem -I./src src/

# Сборка со всеми предупреждениями
make CFLAGS+="-Werror" braille
```

- ✓ Ноль предупреждений компилятора (`-Wall -Wextra`)
- ✓ Чисто по cppcheck (нет критических проблем)
- ✓ const-корректные API
- ✓ NULL-безопасные аллокации
- ✓ Правильная static-связываемость для внутренних функций

**Примечания для macOS:**
- Использует CoreAudio для захвата звука (автоопределение)
- Может потребоваться Xcode Command Line Tools: `xcode-select --install`
- Если ncurses не найден, установите через Homebrew: `brew install ncurses`

### 󰎁 Генерация демо-GIF

Требуется [VHS](https://github.com/charmbracelet/vhs) (установить через `brew install vhs` или `go install github.com/charmbracelet/vhs@latest`)

```bash
vhs demo.tape
```

Это создаст `assets/demo.gif`, демонстрирующий танцора в действии.

---

## 󰙨 Использование

```bash
# Базовый запуск
./braille-boogie

# Демо-режим — все эффекты включены (рекомендуется для первого запуска!)
./braille-boogie --demo
```

### 󰘳 Параметры
| Флаг | Описание |
|------|----------|
| `-s, --source <имя>` | Источник звука (по умолчанию: auto) |
| `-p, --pulse` | Использовать PulseAudio вместо PipeWire |
| `-f, --fps <n>` | Целевая частота кадров (по умолчанию: 60) |
| `-t, --theme <имя>` | Цветовая тема |
| `-c, --config <файл>` | Путь к файлу конфигурации |
| `--no-ground` | Отключить линию земли |
| `--no-shadow` | Отключить тень/отражение |
| `--pick-source` | 󰐕 Интерактивный выбор источника звука |
| `--show-caps` | 󰐕 Показать возможности терминала |
| `--demo` | 󰐕 Демо-режим: все эффекты включены |

### 󰌌 Управление в реальном времени

**Основное:**
| Клавиша | Действие |
|---------|----------|
| `?` / `F1` | Переключить справку |
| `q` / `Esc` | Выход |
| `+` / `-` | Настроить чувствительность |
| `t` | Переключение цветовых тем (13 доступно) |

**Визуальные переключатели:**
| Клавиша | Действие |
|---------|----------|
| `g` | Переключить линию земли |
| `r` | Переключить тень/отражение |
| `p` | Переключить частицы |
| `m` | Переключить следы движения |
| `b` | Переключить анимацию дыхания |

**Эффекты v3.0:**
| Клавиша | Действие |
|---------|----------|
| `f` | Переключить фоновые эффекты |
| `e` | Циклическое переключение типов фоновых эффектов (7 режимов) |

**Профессиональные инструменты v3.0+:**
| Клавиша | Действие |
|---------|----------|
| `x` | Переключить запись кадров (режим экспорта) |
| `i` | Переключить оверлей профайлера производительности |

### 󰏘 Цветовые темы (13 доступно)

**Оригинальные темы:**
| Тема | Описание |
|------|----------|
| 󰏘 `default` | Классический голубой градиент |
| 󰈸 `fire` | Красно-оранжево-жёлтый градиент |
| 󰖐 `ice` | Сине-голубо-белый градиент |
| 󰓃 `neon` | Яркий маджента/голубой/зелёный |
| 󰘧 `matrix` | Зелёный на чёрном |
| 󰗃 `synthwave` | Фиолетово-розовый градиент |
| 󰏘 `mono` | Бело-серый монохром |

**Новые темы v2.4+:**
| Тема | Описание |
|------|----------|
| 󱝂 `aurora` | Северное сияние (зелёный→бирюзовый→синий→фиолетовый) |
| 󰖛 `sunset` | Тёплое вечернее небо (оранжевый→розовый→фиолетовый) |
| 󰘸 `ocean` | Глубоководная атмосфера (тёмно-синий→бирюзовый→аквамарин) |
| 󰄛 `candy` | Мягкие пастельные тона (розовый→мятный→лавандовый) |
| 󱥒 `vapor` | Интенсивный вейпорвейв (ярко-розовый→голубой→фиолетовый) |
| 󰈸 `ember` | Тлеющие угли (тёмно-красный→оранжевый→жёлтый) |

Нажмите `t` для переключения между всеми темами или `?` для интерактивной справки.

---

## 󰒓 Конфигурация

Файл конфигурации: `~/.config/braille-boogie/config.ini`

```ini
[audio]
source = auto
backend = pipewire
sensitivity = 1.0

[visual]
theme = matrix
ground = true
shadow = true
particles = true
trails = true
breathing = true

[animation]
fps = 60
```

---

## 󰙵 Архитектура

```
┌─────────────────────────────────────┐
│   PipeWire / PulseAudio / CoreAudio │
│       (Поток захвата звука)         │
└─────────────────────────────────────┘
                  │
                  ▼
┌─────────────────────────────────────┐
│     Обработка FFT (cavacore)        │
│  ├─ 256 частотных бинов             │
│  └─ Низкая задержка анализа         │
└─────────────────────────────────────┘
                  │
                  ▼
┌─────────────────────────────────────┐
│      Движок скелетного танцора      │
│  ├─ Определение битов + BPM         │
│  ├─ Классификация стиля/жанра       │
│  ├─ Выбор позы (228 поз)            │
│  └─ Физическая интерполяция         │
└─────────────────────────────────────┘
                  │
                  ▼
┌─────────────────────────────────────┐
│       Система эффектов (v3.0)       │
│  ├─ Симуляция физики частиц         │
│  ├─ История следов движения         │
│  ├─ Фоновые эффекты (7 режимов)     │
│  └─ Визуальные улучшения            │
└─────────────────────────────────────┘
                  │
                  ▼
┌─────────────────────────────────────┐
│      Рендерер Braille-холста        │
│  ├─ 50×52 виртуальных пикселей      │
│  ├─ Кривые Безье для конечностей    │
│  └─ 25×13 вывод в терминал          │
└─────────────────────────────────────┘
```

### 󰕮 Магия Braille-символов

Unicode Braille (U+2800–U+28FF) обеспечивает **разрешение 2×4 субпикселя**:

```
┌───┬───┐     Каждая ячейка имеет 8 точек:
│ 1 │ 4 │     Точки 1-3: левый столбец
├───┼───┤     Точки 4-6: правый столбец
│ 2 │ 5 │     Точки 7-8: нижний ряд
├───┼───┤     
│ 3 │ 6 │     Кодирование: база 0x2800 + битовый паттерн
├───┼───┤     Пример: ⣿ = 0x28FF (все точки)
│ 7 │ 8 │
└───┴───┘
```

---

## 󰚹 Категории поз

| Категория | Позы | Триггер |
|-----------|------|---------|
| 󰆴 **IDLE** | 4 | Энергия < 0.15 |
| 󰛿 **CALM** | 5 | Энергия 0.15-0.35 |
| 󰝚 **GROOVE** | 8 | Энергия 0.35-0.55 |
| 󱐋 **ENERGETIC** | 7 | Энергия 0.55-0.75 |
| 󰈸 **INTENSE** | 6 | Энергия > 0.75 |
| 󰋄 **BASS_HIT** | 4 | Сильный басовый транзиент |
| 󰋅 **TREBLE_ACCENT** | 4 | Пик высоких частот |
| 󰛿 **MOONWALK** | 4 | Определён жанр хип-хоп/поп |
| 󰴓 **BALLET** | 5 | Определён классический жанр |
| 󰨊 **BREAKDANCE** | 4 | Определён жанр хип-хоп |
| 󰝚 **WALTZ** | 4 | Определён классический жанр |
| 󰚩 **ROBOT** | 5 | Определён электронный жанр |
| 󰋄 **HEADBANG** | 4 | Определён рок-жанр |

---

## 󰙅 Благодарности

Этот проект стоит на плечах гигантов:

### 󰊤 [cava](https://github.com/karlstav/cava) от Karl Stavestrand
Захват звука и обработка FFT адаптированы из cava (Console-based Audio Visualizer for ALSA).

### 󰆃 Вдохновение
- 󰄛 **romanm.ch cat animation** — Референс плавной терминальной анимации
- 󰘧 **Библиотека ncurses** — Основа рендеринга в терминале
- 󰓾 **FFTW3** — Вычисление быстрого преобразования Фурье
- 󰕮 **Unicode Consortium** — Спецификация символов Брайля

---

## 󰓎 Участие в разработке

Приветствуются любые вклады! См. [CONTRIBUTING.md](CONTRIBUTING.md) для:
- Инструкции по сборке для всех платформ
- Руководство по стилю кода
- Рекомендации по pull request
- Обзор структуры проекта

Будь то:
- 󰋄 Новые танцевальные позы или жанры
- 󰎈 Улучшения аудио-бэкенда
- 󱐋 Визуальные эффекты и темы
- 󰃢 Исправления ошибок и оптимизации
- 󰈙 Улучшения документации

Не стесняйтесь открывать issues или отправлять pull requests.

---

## 󰿃 Лицензия

MIT License — подробности в файле [LICENSE](LICENSE).

---

<div align="center">

**«Код танцует, когда играет музыка.»**

</div>

---

<sub>Оригинальная работа **Dr. Baklava** • [github.com/cd4u2b0z](https://github.com/cd4u2b0z) • 2026</sub>

<--help {motion} = {motion} = ZHIuYmFrbGF2YQ== -->
