[English](ROADMAP.md) | **Русский**

# 󰛤 Дорожная карта Braille Boogie

Дорожная карта разработки и отслеживание функций для braille-boogie.

---

## 󰐕 Текущий статус: v3.2.0 󰝚

### 󰄬 Завершённые функции
- [x] **228 базовых поз** в 13 категориях (~1,190 с вариациями)
- [x] **6 жанровых танцевальных стилей** (лунная походка, балет, брейк-данс, вальс, робот, хедбэнг)
- [x] **Система пасхалок** (~15% срабатывания для жанровых движений)
- [x] **Улучшенное определение жанра** (электроника, рок, хип-хоп, поп, эмбиент, классика)
- [x] Физика суставов (пружинно-демпферная система)
- [x] Детекция битов с оценкой BPM
- [x] Частотно-зависимое движение (бас→ноги, средние→торс, высокие→руки)
- [x] Unicode Braille рендеринг (разрешение 2×4 субпикселя)
- [x] Аудио-бэкенды PipeWire + PulseAudio
- [x] История поз антиповторения (избегает последних 8 поз)
- [x] Функции сглаживания (quad, cubic, bounce, elastic)
- [x] INI конфигурация (`~/.config/braille-boogie/config.ini`)
- [x] 256-цветные градиенты с 13 темами
- [x] Линия земли с тенью/отражением
- [x] Адаптивное масштабирование терминала (SIGWINCH resize)
- [x] Переключение тем во время выполнения (клавиша `t`)
- [x] Система частиц с физикой
- [x] Следы движения с затуханием
- [x] Визуальные улучшения (дыхание, вибрация пола)
- [x] Архитектура шины управления с унифицированными сигналами
- [x] UI-реактивность (пульсация рамки, измеритель энергии, индикатор бита)
- [x] Система ограничений колен (предотвращает «косолапость»)
- [x] Отслеживание границ тела для исключения частиц
- [x] Улучшенная система отталкивания частиц
- [x] Интерактивный оверлей справки (клавиша ? или F1)
- [x] 13 цветовых тем (aurora, sunset, ocean, candy, vapor, ember и др.)
- [x] Режим записи/экспорта кадров (клавиша X)
- [x] Оверлей профайлера производительности (клавиша I)
- [x] Меню выбора аудиоисточника (--pick-source)
- [x] Определение возможностей терминала (--show-caps)
- [x] **7 фоновых эффектов частиц** (эмбиент, волны, аура, взрыв, ленты, дождь, вихрь)

---

## 󰝚 v3.2.0 — Танцевальная революция (ЗАВЕРШЕНО)

**Достигнуто: 9.5 → 9.7** | Релиз 2026-01-19

### 󰛿 Новые танцевальные стили
- [x] **Лунная походка** (4 позы) — Плавные скольжения назад со стойками на носках
- [x] **Балет** (5 поз) — Классические позиции включая арабеск, плие, релеве
- [x] **Брейк-данс** (4 позы) — Пауэр-мувы с топроками, фризами, подготовительными стойками
- [x] **Вальс** (4 позы) — Элегантные бальные рамки, повороты, подъёмы, покачивания
- [x] **Робот** (5 поз) — Механические локи, изоляции, экстеншены
- [x] **Хедбэнг** (4 позы) — Рок-позы с мощными стойками и «рогами»

### 󰎈 Улучшенное определение жанра
- [x] **Поп-стиль** добавлена категория для сбалансированных треков с ровным битом
- [x] **Пасхальные триггеры** — Жанровые движения срабатывают случайно (~15% шанс)
- [x] **Улучшенные пороги** для лучшего определения электроники, хип-хопа, рока, классики
- [x] **Жанр-поза соответствие** — Электроника→Робот, Хип-хоп→Лунная походка/Брейк и др.

### 󰄧 Расширение системы поз
- [x] **228 базовых поз** (рост с 36 — 6× увеличение)
- [x] **~1,190 вариаций** с процедурным отзеркаливанием
- [x] **13 категорий поз** (добавлено 6 новых жанровых)

### 󰧹 Качество кода (v3.2.1)
- [x] **Потокобезопасный профайлер** — `_Atomic` для кросс-потокового тайминга
- [x] **Централизованные константы** — Новый `constants.h` с ~150 параметрами
- [x] **Сканлайн заливка** — Ограниченное O(4096) выделение памяти

### 󰧹 Статический анализ (v3.2.4)
- [x] **cppcheck чисто** — Ноль критических/высоких проблем
- [x] **NULL-безопасность** — Проверка возврата malloc()
- [x] **const-корректность** — 15+ функций с `const` указателями
- [x] **static-связываемость** — 20+ внутренних функций правильно ограничены
- [x] **Затенение переменных** — Устранены коллизии имён во внутренних областях

### 󰆍 Система сборки (v3.2.3)
- [x] **Строки версии** — Git версия, хеш и дата сборки через $(shell ...)
- [x] **Make цели** — Добавлены help, info, run, debug
- [x] **Рабочий процесс разработчика** — make run собирает и запускает, make debug запускает gdb

### 󰣇 Поддержка платформ (v3.2.2)
- [x] **macOS CoreAudio бэкенд** — Нативный захват через AudioQueue API
- [x] **Кросс-платформенный Makefile** — Автоопределение ОС и линковка фреймворков
- [x] **Поддержка Homebrew** — Простая установка на macOS

### 󰃢 Очистка кода
- [x] **Легаси-код архивирован** — Перемещено 9 файлов (~1,342 строки) в `src/dancer/legacy/`
- [x] **Удалены стаб-функции** — Очищен нефункциональный код визуализатора
- [x] **Совместимость API сохранена** — Стаб-функции оставлены для интеграций

---

## 󰎁 v3.0.1 — Продакшн-инструменты (ЗАВЕРШЕНО)

**Достигнуто: 9.9 → 9.5 (реалистично)** | Релиз 2026-01-19

### 󰎁 Экспорт и запись
- [x] Рекордер кадров с сохранением ANSI-цветов
- [x] Директории записи с временными метками
- [x] Поддержка рабочего процесса экспорта GIF/видео

### 󰾆 Профайлер производительности
- [x] Отслеживание FPS в реальном времени (текущий/средний/мин/макс)
- [x] Разбивка тайминга компонентов (аудио/обновление/рендер)
- [x] Мониторинг количества частиц и следов
- [x] Визуальная шкала производительности (зелёная/жёлтая/красная зоны)

### 󰎈 Выбор аудиоисточника
- [x] Перечисление источников PulseAudio/PipeWire
- [x] Интерактивное меню выбора
- [x] CLI-флаг --pick-source

### 󰍹 Определение терминала
- [x] Определение поддержки Sixel графики
- [x] Определение протокола Kitty
- [x] Определение iTerm2 inline изображений
- [x] Проверка True color (24-бит)
- [x] CLI-флаг --show-caps

## 󰸞 v3.0 — Большое аудио-обновление (ЗАВЕРШЕНО)

**Достигнуто: 9.7 → 9.9** | Релиз 2026-01-18

### 󰾆 Продвинутый BPM-трекер
- [x] Мульти-тап усреднение темпа с гистограммной кластеризацией
- [x] Оценка уверенности (0-1) для надёжности BPM
- [x] Отслеживание стабильности во времени
- [x] Фиксация темпа при уверенности + стабильности
- [x] Определение половинного/двойного темпа
- [x] Диапазон 40-240 BPM (расширен с 60-200)
- [x] Адаптивное отслеживание для плавных изменений темпа

### 󰄧 Динамический анализатор энергии
- [x] Расчёт RMS-энергии
- [x] Детекция пиков и огибающий фильтр
- [x] 5 зон интенсивности (Тишина, Низкая, Средняя, Высокая, Пик)
- [x] Спектральные характеристики (центроид, разброс, спад)
- [x] Анализ динамического диапазона (дБ)
- [x] Метрика интенсивности темпа (BPM + энергия)
- [x] Адаптивные пороги на основе истории
- [x] 6-полосное отслеживание энергии

### 󱐋 Фоновые эффекты частиц
- [x] 7 эффектных режимов
- [x] Эмбиент-поле (плавающие мерцающие частицы)
- [x] Спектральные волны (частотно-реактивные импульсы)
- [x] Энергетическая аура (пульсирующее кольцо вокруг танцора)
- [x] Ударный взрыв (синхронизированные взрывы)
- [x] Частотные ленты (вертикальные полосы)
- [x] Дождь частиц (падающие сверху)
- [x] Спиральный вихрь (вращающиеся рукава)
- [x] Управление интенсивностью и скоростью
- [x] Полная интеграция аудиореактивности

---

## 󰐕 v4.0 — Мульти-танцор и эффекты (ПЛАНИРУЕТСЯ)

**Цель: Визуальное зрелище**

- [ ] **Несколько танцоров**
  - 2-4 танцора с разными стилями
  - Синхронное или независимое движение

- [ ] **Фоновые эффекты**
  - Звёздное поле пульсирующее в такт
  - Градиентные фоны

- [ ] **Текстовые оверлеи**
  - Информация о текущем треке (если доступна)
  - Отображение BPM
  - Измерители энергии

---

## 󰆃 Идеи на будущее

- [ ] **Поддержка MIDI** — Реакция на MIDI-ноты
- [ ] **Протокол OSC** — Интерфейс внешнего управления
- [ ] **Нативный Wayland** — Прямой рендеринг Wayland
- [ ] **Веб-версия** — Порт на WASM + Canvas
- [ ] **Пресеты поз** — Загрузка пользовательских файлов поз
- [ ] **Танцевальные баттлы** — Два танцора, разделённый экран
- [ ] **VJ-режим** — Полноэкранный, без UI-элементов

---

## 󰔏 История версий

| Версия | Дата | Основное |
|--------|------|----------|
| v3.2.0 | 2026-01-19 | 228 поз, жанровые стили, качество кода |
| v3.0.1 | 2026-01-19 | Продакшн-инструменты, профайлер, экспорт |
| v3.0.0 | 2026-01-18 | BPM-трекер, анализатор энергии, фоновые FX |
| v2.4.0 | 2026-01-18 | Шина управления, UI-реактивность, справка |
| v2.2.0 | 2026-01-18 | Частицы, следы, визуальные эффекты |
| v2.1.0 | 2026-01-19 | Конфигурация, темы, земля/тень |
| v2.0.0 | 2026-01-18 | Брайль-скелет, физика |
| v1.0.0 | 2026-01-17 | Первоначальный релиз |
